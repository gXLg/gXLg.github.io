<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Abi Ranking">
    <meta property="og:site_name" content="Q12">
    <meta property="og:description" content="Anonyme Abstimmung">
    <meta property="og:type" content="video">
    <meta name="theme-color" content="#aaaaff">

    
    <style>
      table tr:nth-child(even) { background-color: #ddf; }
      td { padding: 7px; }
      input[type=button] { background-color: #aaf; }
    </style>

    <script>

      const list = [
        "Nie im Unterricht",
        "Immer betrunken",
        "Lehrerfeind",
        "Kettenraucher",
        "Stufenmatratze",
        "Durchgemogelt",
        "Gute-Laune-Magnet",
        "erste ungewollte Schwangerschaft",
        "schlechtester Autofahrer",
        "Hätte ich gern näher kennengelernt",
        "Hottest Female",
        "Schwiegermuttis-Liebling",
        "Heiratet als erstes",
        "Fängt 5 Minuten vorher an zu lernen",
        "Alkoholiker",
        "Schnorrer",
        "Dümmsten Fragen",
        "Nichts unter 13 Punkte",
        "Scheinbarer Engel - krassestes Gegenteil",
        "Führerschein??",
        "Größter Lehrerschleimer",
        "Schlimmste Lache",
        "Mit 30 im Gefängnis",
        "Größter Alman",
        "Stufenmommy",
        "Stufendaddy",
        "Harte Schale, weicher Kern",
        "Hottest Male",
        "Außergewöhnlichster Kleidungsstil",
        "Lebt für die Schule",
        "Für Geld mach ich alles",
        "Originellstes Niesen",
        "Unvergesslich",
        "Wird Millionär",
        "Influencer",
        "Gossip Girl",
        "sponsored by parents",
        "Ist gern fies",
        "Mit 40 noch bei Mutti",
        "Dorfmensch",
        "Meine Schrift ist Kunst",
        "Ghettosprache",
        "Wandelndes Meme",
        "Verpeiltheit in Person",
        "Lange Rede, gar kein Sinn",
        "Fuckboy",
        "Süßestes Pärchen",
        "Tollpatschig",
        "Hyperaktiv 24/7",
        "immer unpünktlich"
      ];

      window.onload = () => {
        const main = document.getElementById("main");
        const alr = localStorage.getItem("already");
        if(alr){
          main.innerHTML += "Du hast schon abgestimmt";
          return;
        }
        let html = "<table cellspacing=0 cellpadding=0>";
        for(let i = 0; i < list.length; i ++){
          const s = "<td>" + (i + 1) + ". " + list[i] + "</td>";
          const p = "<td><input id=\"name_" + i + "\"></td>";
          html += "<tr>" + s + p + "</tr>";
        }
        html += "</table>";
        main.innerHTML += html;

        main.innerHTML += "<br><br><input type=button value=\"Abstimmen!\" onclick=abstimmen()>"
      };

      function abstimmen(){
        const l = [];
        for(let i = 0; i < list.length; i ++){
          const v = document.getElementById("name_" + i).value.trim();
          if(v == "") l.push("_");
          else l.push(v);
        }

        fetch("https://kemuri.ddns.net:11069/abi-ranking", {
          "method": "POST",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": JSON.stringify(l)
        }).then(r => {
          alert("Abstimmung erfolgreich!");
          localStorage.setItem("already", true);
          location.reload();
        }).catch(error => alert("Fehler ist aufgetreten, gib dem Entwickler bescheid: " + error));
      }

    </script>

  </head>

  <body>
    <h1>Abi Ranking Q12</h1>
    <h2>Anonyme Abstimmung</h2>
    <div style="color: #555;">Achtung: nachdem du "Abstimmen!" clickst, kannst du deine Wahl nicht mehr ändern. Die Abstimmung kann nur einmal erfolgen</div>
    <div id="main"></div>
  </body>
</html>
